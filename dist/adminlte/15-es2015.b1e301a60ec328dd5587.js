(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{QX5w:function(t,e,a){"use strict";a.r(e),a.d(e,"SavedFormsModule",function(){return $});var i=a("s7LF"),r=a("SVse"),o=a("5QHs"),n=a("LUZP"),s=a("OaSA"),c=a("VRyK"),l=a("8Y7J"),d=a("KFfU"),m=a("7g+E"),h=a("zXlT"),u=a("iInd"),b=a("Q2Ze"),p=a("e6WT"),f=a("ZTz/"),g=a("UhP/"),v=a("Dxy4"),T=a("ZFy/");function S(t,e){if(1&t&&(l.Ub(0,"mat-option",24),l.Oc(1),l.Tb()),2&t){const t=e.$implicit;l.qc("value",t.value),l.Bb(1),l.Pc(t.title)}}function U(t,e){1&t&&(l.Ub(0,"mat-error"),l.Oc(1,"You must make a selection"),l.Tb())}function y(t,e){1&t&&(l.Ub(0,"th",25),l.Oc(1," Form Id "),l.Tb())}function w(t,e){if(1&t&&(l.Ub(0,"td",26),l.Oc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Pc(t.formId)}}function C(t,e){1&t&&(l.Ub(0,"th",25),l.Oc(1,"Form Name "),l.Tb())}function O(t,e){1&t&&(l.Ub(0,"td",26),l.Oc(1,"Form Name"),l.Tb())}function I(t,e){1&t&&(l.Ub(0,"th",27),l.Oc(1,"Form Type"),l.Tb())}function D(t,e){if(1&t&&(l.Ub(0,"td",26),l.Oc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Pc(t.fileType)}}function M(t,e){1&t&&(l.Ub(0,"th",25),l.Oc(1,"Created Date"),l.Tb())}function A(t,e){if(1&t&&(l.Ub(0,"td",26),l.Oc(1),l.jc(2,"date"),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Qc(" ",l.lc(2,1,t.createdAt,"mediumDate")," ")}}function k(t,e){1&t&&(l.Ub(0,"th",25),l.Oc(1,"Updated Date"),l.Tb())}function F(t,e){if(1&t&&(l.Ub(0,"td",26),l.Oc(1),l.jc(2,"date"),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Qc(" ",l.lc(2,1,t.updatedAt,"mediumDate")," ")}}function R(t,e){1&t&&(l.Ub(0,"th",27),l.Oc(1," Action "),l.Tb())}function B(t,e){if(1&t){const t=l.Vb();l.Ub(0,"td",26),l.Ub(1,"div",28),l.Ub(2,"span",29),l.ec("click",function(){l.Cc(t);const a=e.$implicit;return l.ic().edit(a._id,a.fileType)}),l.Oc(3," edit "),l.Tb(),l.Ub(4,"span",30),l.ec("click",function(){l.Cc(t);const a=e.$implicit;return l.ic().printPage(a._id,a.fileType)}),l.Oc(5," print "),l.Tb(),l.Tb(),l.Tb()}}function P(t,e){1&t&&l.Pb(0,"tr",31)}function x(t,e){1&t&&l.Pb(0,"tr",32)}function q(t,e){1&t&&(l.Ub(0,"tr",33),l.Ub(1,"td",34),l.Oc(2,"Data Not Found "),l.Tb(),l.Tb())}const z=function(){return[5,10,20,30]},j=[{path:"",component:(()=>{class t{constructor(t,e,a,i,r){this.forms=t,this.spinner=e,this.shared=a,this.router=i,this.fb=r,this.displayedColumns=["formId","formType","createdAt","updatedAt","Action"],this.selectArr=[{title:"Form Id",value:"formId"},{title:"Form Type",value:"fileType"},{title:"Created Date",value:"createdAt"},{title:"Updated Date",value:"updatedAt"}],this.page=1,this.limit=5,this.searchString=""}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator1.pageIndex=0),Object(c.a)(this.sort.sortChange,this.paginator1.page).subscribe(()=>{this.changeState={field:this.sort.active||"",value:this.sort.direction||"",page:this.paginator1.pageIndex,limit:this.paginator1.pageSize},this.getSavedforms(),console.log(this.changeState)})}ngOnInit(){this.searchControl=this.fb.group({searchSelect:["",i.C.required],searchInput:[""]}),this.getSavedforms()}getSavedforms(t,e,a,i,r,o){var n,c,l,d;void 0===t&&(t=null===(n=this.changeState)||void 0===n?void 0:n.field),void 0===e&&(e=null===(c=this.changeState)||void 0===c?void 0:c.value),void 0===a&&(a=null===(l=this.changeState)||void 0===l?void 0:l.page),void 0===i&&(i=null===(d=this.changeState)||void 0===d?void 0:d.limit),void 0===r&&(r=this.f.searchSelect.value),void 0===o&&(o=this.f.searchInput.value),this.forms.getAllSavedForms(a,i,t,e,r,o).subscribe(t=>{this.showDatas=t.data,this.totalCount=t.totalCount,this.showDatas.forEach((t,e)=>this.showDatas[e].index=e),this.tempArray=new s.l(this.showDatas),this.tempArray.sort=this.sort,console.log("get res",this.showDatas)})}edit(t,e){let a={queryParams:{formType:e.toString()}};"Hazard"==e?this.router.navigate(["/admin/forms/hazardRep/"+t],a):"Incident"==e?this.router.navigate(["/admin/forms/incidentRep/"+t],a):"Site Inspection"==e?this.router.navigate(["/admin/forms/siteInspect/"+t],a):"Tool Box"==e?this.router.navigate(["/admin/forms/toolboxTalk/"+t],a):"Risk Assessment"==e&&this.router.navigate(["/admin/forms/riskAssessSWMS/"+t],a)}printPage(t,e){this.shared.printNext(!0),console.log("check"),localStorage.setItem("key","print"),this.spinner.show("printLoader");let a={queryParams:{formType:e.toString()}};"Hazard"==e?this.router.navigate(["/",{outlets:{print:["print","hazardRep",t]}}],a):"Incident"==e?this.router.navigate(["/",{outlets:{print:["print","incidentRep",t]}}],a):"Site Inspection"==e?this.router.navigate(["/",{outlets:{print:["print","siteInspect",t]}}],a):"Tool Box"==e?this.router.navigate(["/",{outlets:{print:["print","toolboxTalk",t]}}],a):"Risk Assessment"==e&&this.router.navigate(["/",{outlets:{print:["print","riskAssessSWMS",t]}}],a)}paginator(t){this.page=t.pageIndex,this.limit=t.pageSize,this.getSavedforms()}applyFilter(t){this.searchString=t.target.value}get f(){return this.searchControl.controls}reset(){this.f.searchSelect.setValue(""),this.f.searchInput.setValue(""),this.getSavedforms()}search(){this.searchString=this.f.searchInput.value,this.searchString=this.f.searchInput.value,this.getSavedforms()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(d.a),l.Ob(m.c),l.Ob(h.a),l.Ob(u.f),l.Ob(i.f))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-saved-forms"]],viewQuery:function(t,e){if(1&t&&(l.Sc(o.a,!0),l.Sc(n.a,!0)),2&t){let t;l.xc(t=l.fc())&&(e.paginator1=t.first),l.xc(t=l.fc())&&(e.sort=t.first)}},decls:45,vars:10,consts:[[1,"col","ml-2","pt-3"],[1,"row",3,"formGroup"],[1,"col-3"],["matInput","","placeholder","Search","formControlName","searchInput",3,"type","keyup"],["input",""],["formControlName","searchSelect"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","",3,"click"],[1,""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","formId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["matColumnDef","formType"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","createdAt"],["matColumnDef","updatedAt"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[2,"display","flex","justify-content","space-around"],["matTooltip","Edit",1,"material-icons",3,"click"],["matTooltip","print",1,"material-icons",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"h1"),l.Oc(2," All Saved Forms Table"),l.Tb(),l.Tb(),l.Ub(3,"div",1),l.Ub(4,"div",2),l.Ub(5,"mat-form-field"),l.Ub(6,"input",3,4),l.ec("keyup",function(t){return e.applyFilter(t)}),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"div",2),l.Ub(9,"mat-form-field"),l.Ub(10,"mat-select",5),l.Ub(11,"mat-option"),l.Oc(12,"Clear"),l.Tb(),l.Mc(13,S,2,2,"mat-option",6),l.Tb(),l.Mc(14,U,2,0,"mat-error",7),l.Tb(),l.Tb(),l.Ub(15,"div",2),l.Ub(16,"button",8),l.ec("click",function(){return e.search()}),l.Oc(17," Search "),l.Tb(),l.Tb(),l.Ub(18,"div",2),l.Ub(19,"button",8),l.ec("click",function(){return e.reset()}),l.Oc(20," Reset Filter "),l.Tb(),l.Tb(),l.Tb(),l.Ub(21,"div",9),l.Ub(22,"table",10),l.Sb(23,11),l.Mc(24,y,2,0,"th",12),l.Mc(25,w,2,1,"td",13),l.Rb(),l.Sb(26,14),l.Mc(27,C,2,0,"th",12),l.Mc(28,O,2,0,"td",13),l.Rb(),l.Sb(29,15),l.Mc(30,I,2,0,"th",16),l.Mc(31,D,2,1,"td",13),l.Rb(),l.Sb(32,17),l.Mc(33,M,2,0,"th",12),l.Mc(34,A,3,4,"td",13),l.Rb(),l.Sb(35,18),l.Mc(36,k,2,0,"th",12),l.Mc(37,F,3,4,"td",13),l.Rb(),l.Sb(38,19),l.Mc(39,R,2,0,"th",16),l.Mc(40,B,6,0,"td",13),l.Rb(),l.Mc(41,P,1,0,"tr",20),l.Mc(42,x,1,0,"tr",21),l.Mc(43,q,3,0,"tr",22),l.Tb(),l.Ub(44,"mat-paginator",23),l.ec("page",function(t){return e.paginator(t)}),l.Tb(),l.Tb()),2&t&&(l.Bb(3),l.qc("formGroup",e.searchControl),l.Bb(3),l.qc("type",e.f.searchSelect.value===e.selectArr[2].value||e.f.searchSelect.value===e.selectArr[3].value?"date":"text"),l.Bb(7),l.qc("ngForOf",e.selectArr),l.Bb(1),l.qc("ngIf",e.f.searchSelect.hasError("required")),l.Bb(8),l.qc("dataSource",e.tempArray),l.Bb(19),l.qc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.qc("matRowDefColumns",e.displayedColumns),l.Bb(2),l.qc("pageSizeOptions",l.tc(9,z))("length",e.totalCount))},directives:[i.s,i.k,b.c,p.b,i.d,i.r,i.i,f.a,g.n,r.m,r.n,v.a,s.k,n.a,s.c,s.e,s.b,s.g,s.j,s.h,o.a,b.b,s.d,n.b,s.a,T.a,s.f,s.i],pipes:[r.e],styles:[".viewBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#007bff;font-size:21px!important}  .mat-sort-header-container{margin-left:47%!important}table[_ngcontent-%COMP%]{width:100%}.select[_ngcontent-%COMP%]{width:100%!important}.pt-3[_ngcontent-%COMP%]{display:inline-block;font-size:32px;font-weight:700;word-break:break-word;font-family:Inter,sans-serif}"]}),t})()}];let N=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[u.j.forChild(j)],u.j]}),t})();var H=a("PCNd");let $=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[r.c,i.y,H.a,N]]}),t})()}}]);